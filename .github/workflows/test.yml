# This workflow will establish which workflows should be run and trigger them appropriately
name: Test Runner

on:
  # Run during pull request containing python files
  push:

jobs:
  unit-tests:
    timeout-minutes: 10
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - uses: fsherratt/github-actions-playground/workflows/install-poetry
        with:
          python_version: '3.10'
          working_directory: test/project_2

      - name: Symlink python venv
        working-directory: ${{ inputs.working_directory }} 
        run: |
          PYTHON_VENV="$(poetry env info --path)\Scripts\python"
          ln -s $PYTHON_VENV python

      - name: Test symlink
        working-directory: ${{ inputs.working_directory }} 
        run: |
          python -m pip list
